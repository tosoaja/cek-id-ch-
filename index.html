<!doctype html>

<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cek ID WA (Channel / Chat / Group)</title>
  <style>
    :root{--bg:#0b0f14;--card:#10161d;--muted:#a9b3be;--text:#e6edf3;--accent:#57a6ff;--ok:#3ddc97;--warn:#ffb703;--err:#ff6b6b;}
    *{box-sizing:border-box} body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Ubuntu,Calibri,sans-serif;background:radial-gradient(1200px 600px at 10% -10%,#11223333,transparent),linear-gradient(180deg,#0a0f14,#0c1218);} 
    .wrap{max-width:920px;margin:40px auto;padding:16px}
    .card{background:var(--card);border:1px solid #1f2833;border-radius:18px;box-shadow:0 10px 30px rgba(0,0,0,.25);overflow:hidden}
    .head{padding:18px 20px;border-bottom:1px solid #1f2833;display:flex;align-items:center;gap:12px}
    .dot{width:10px;height:10px;border-radius:50%}
    .dot.ok{background:var(--ok)} .dot.warn{background:var(--warn)} .dot.err{background:var(--err)}
    h1{font-size:20px;margin:0;color:var(--text)}
    .body{padding:20px;color:var(--text)}
    label{display:block;margin:0 0 8px;color:var(--muted);font-weight:600;letter-spacing:.2px}
    textarea,input[type=text]{width:100%;background:#0c1218;border:1px solid #223042;color:var(--text);border-radius:14px;padding:14px 16px;font-size:15px;outline:none}
    textarea{min-height:120px;resize:vertical}
    .row{display:grid;grid-template-columns:1fr auto;gap:12px}
    button{cursor:pointer;border:none;border-radius:14px;padding:12px 16px;font-weight:700;background:var(--accent);color:#071521;transition:transform .05s ease,opacity .2s}
    button:hover{opacity:.95} button:active{transform:translateY(1px)}
    .muted{color:var(--muted);font-size:13px;margin-top:10px;line-height:1.4}
    .out{margin-top:18px;display:grid;gap:10px}
    .kv{display:grid;grid-template-columns:180px 1fr;gap:10px;align-items:center}
    .badge{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;font-size:12px;border:1px solid #263445;background:#0b1320;color:var(--muted)}
    .pill{padding:.2rem .55rem;border-radius:999px;border:1px solid #2a3b52;background:#0b1524;color:#9bb5d1;font-size:12px}
    .code{background:#0a1220;border:1px solid #1e2a3c;padding:10px 12px;border-radius:12px;font-family:ui-monospace,Menlo,Consolas,monospace;overflow:auto}
    .actions{display:flex;flex-wrap:wrap;gap:8px}
    .ghost{background:#121b26;border:1px solid #243246;color:#c9d6e2}
    a.btn{display:inline-flex;align-items:center;gap:8px;text-decoration:none}
    .grid{display:grid;gap:12px}
    .two{grid-template-columns:1fr 1fr}
    .footer{border-top:1px solid #1f2833;padding:14px 20px;color:#90a2b5;font-size:12px}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="head">
        <div class="dot ok"></div>
        <h1>Cek ID WhatsApp (Channel / Chat / Group)</h1>
      </div>
      <div class="body">
        <label for="inp">Tempel tautan WhatsApp / JID / nomor:</label>
        <div class="grid">
          <textarea id="inp" placeholder="Contoh:\nhttps://whatsapp.com/channel/0029VaAbCdE\nhttps://wa.me/6281234567890\nhttps://api.whatsapp.com/send?phone=62812...\nchat.whatsapp.com/AbCdEfGhIjKLMNopQRstUV\n1203xxxxxxxxx-123456@g.us\n1203xxxxxxxxx@newsletter\n62812xxxxxxx@s.whatsapp.net"></textarea>
          <div class="row">
            <button id="parseBtn">Analisa</button>
            <button class="ghost" id="clearBtn">Bersihkan</button>
          </div>
          <p class="muted">Didukung: <span class="pill">Channel</span> <span class="pill">Nomor/Chat</span> <span class="pill">Group JID</span> <span class="pill">Invite Group</span> <span class="pill">Shortlink</span>. Beberapa tautan (mis. <em>invite group</em> & <em>message code</em>) tidak bisa diubah ke JID tanpa akses API/bergabung ke grup.</p>
        </div><div id="out" class="out" hidden>
      <div class="kv"><div class="badge">Tipe</div><div id="type"></div></div>
      <div class="kv"><div class="badge">Detail</div><div id="detail" class="code"></div></div>
      <div class="kv" id="jidRow" hidden><div class="badge">JID</div><div class="code" id="jid"></div></div>
      <div class="kv" id="linkRow" hidden><div class="badge">Tautan</div><div class="actions" id="links"></div></div>
    </div>

    <div class="footer">
      Tips: Untuk nomor lokal yang diawali 0, ubah ke format internasional (mis. 0 → 62 untuk Indonesia) sebelum membuat JID: <code>62xxxxxxxxxx@s.whatsapp.net</code>.
    </div>
  </div>
</div>

  </div><script>
const el = (q) => document.querySelector(q);
const out = {
  box: el('#out'),
  type: el('#type'),
  detail: el('#detail'),
  jidRow: el('#jidRow'),
  jid: el('#jid'),
  linkRow: el('#linkRow'),
  links: el('#links'),
};

function copyButton(text){
  const b = document.createElement('button');
  b.className = 'ghost';
  b.textContent = 'Salin';
  b.onclick = async ()=>{ try{ await navigator.clipboard.writeText(text); b.textContent = 'Tersalin ✓'; setTimeout(()=>b.textContent='Salin',1200);}catch(e){ alert('Gagal menyalin: '+e.message);} };
  return b;
}

function linkButton(href,label){
  const a = document.createElement('a');
  a.href = href; a.target = '_blank'; a.rel = 'noopener';
  a.className = 'btn ghost'; a.textContent = label;
  return a;
}

function normNumber(num){
  num = num.replace(/[^\d+]/g,'');
  if(num.startsWith('+')) num = num.slice(1);
  return num;
}

function detect(input){
  const s = input.trim();
  const res = { type:'Tidak dikenali', detail:s };
  
  // Channel (public id)
  let m = s.match(/(?:https?:\/\/)?(?:www\.)?whatsapp\.com\/channel\/([A-Za-z0-9]+)/i);
  if(m){
    res.type = 'Channel (Public ID)';
    res.channelPublicId = m[1];
    res.detail = 'Public ID: '+res.channelPublicId;
    res.links = [
      {href:`https://whatsapp.com/channel/${res.channelPublicId}`, label:'Buka di Web'},
      {href:`whatsapp://channel/${res.channelPublicId}`, label:'Buka di Aplikasi'}
    ];
    return res;
  }

  // JID langsung
  if(/@newsletter$/i.test(s)){
    res.type='Channel JID'; res.jid=s; res.detail='JID Channel'; return res;
  }
  if(/@g\.us$/i.test(s)){
    res.type='Group JID'; res.jid=s; res.detail='JID Grup'; return res;
  }
  if(/@s\.whatsapp\.net$/i.test(s)){
    res.type='Chat JID (User)'; res.jid=s; res.detail='JID Pengguna'; return res;
  }

  // Group invite link
  m = s.match(/(?:https?:\/\/)?(?:chat\.whatsapp\.com)\/([A-Za-z0-9]+)/i);
  if(m){
    res.type='Undangan Grup';
    res.invite=m[1];
    res.detail = 'Invite Code: '+res.invite+'\nCatatan: Tidak bisa dikonversi ke JID tanpa bergabung/akses API.';
    res.links=[{href:`https://chat.whatsapp.com/${res.invite}`,label:'Buka Undangan'}];
    return res;
  }

  // Community invite (best-effort)
  m = s.match(/(?:https?:\/\/)?(?:www\.)?whatsapp\.com\/communities\/invite\/([A-Za-z0-9_-]+)/i);
  if(m){
    res.type='Undangan Komunitas';
    res.detail='Kode Komunitas: '+m[1];
    res.links=[{href:`https://whatsapp.com/communities/invite/${m[1]}`,label:'Buka Komunitas'}];
    return res;
  }

  // wa.me message shortlink
  m = s.match(/(?:https?:\/\/)?wa\.me\/message\/([A-Za-z0-9]+)/i);
  if(m){
    res.type='Shortlink Pesan'; res.detail='Kode: '+m[1]+'\nCatatan: Tidak bisa menemukan nomor/JID dari kode ini hanya dengan client-side.'; 
    res.links=[{href:`https://wa.me/message/${m[1]}`,label:'Buka Shortlink'}];
    return res;
  }

  // api.whatsapp.com/send?phone=... atau wa.me/NUMBER
  m = s.match(/(?:https?:\/\/)?api\.whatsapp\.com\/send\/?\?[^#]*phone=(\+?\d+)/i) || s.match(/(?:https?:\/\/)?wa\.me\/(\+?\d{6,})/i);
  if(m){
    const num = normNumber(m[1]);
    res.type='Nomor (Link)';
    res.number=num;
    res.detail='Nomor: '+num+'\nJID: '+num+'@s.whatsapp.net';
    res.jid = num+'@s.whatsapp.net';
    res.links=[
      {href:`https://api.whatsapp.com/send?phone=${num}`,label:'API Link'},
      {href:`https://wa.me/${num}`,label:'wa.me Link'}
    ];
    return res;
  }

  // Nomor polos
  if(/^\+?\d{6,}$/.test(s)){
    const num = normNumber(s);
    res.type='Nomor (Polos)';
    res.number=num; res.jid=num+'@s.whatsapp.net';
    res.detail='Nomor: '+num+'\nJID: '+res.jid;
    res.links=[{href:`https://wa.me/${num}`,label:'Chat di wa.me'}];
    return res;
  }

  return res;
}

function render(res){
  out.box.hidden=false;
  out.type.textContent = res.type;
  out.detail.textContent = res.detail || '';

  if(res.jid){
    out.jidRow.hidden=false;
    out.jid.textContent=res.jid;
  }else{
    out.jidRow.hidden=true;
    out.jid.textContent='';
  }

  out.linkRow.hidden = !(res.links && res.links.length);
  out.links.innerHTML='';
  if(res.links){
    res.links.forEach(l=>{
      const a = linkButton(l.href,l.label);
      out.links.appendChild(a);
    });
  }

  // Tambah tombol copy untuk detail & JID
  out.detail.appendChild(document.createTextNode('\n'));
  out.detail.appendChild(copyButton(res.detail));
  if(res.jid){ out.links.appendChild(copyButton(res.jid)); }
}

el('#parseBtn').onclick = ()=>{
  const input = el('#inp').value.trim();
  if(!input){ alert('Masukkan tautan/JID/nomor terlebih dahulu.'); return; }
  const res = detect(input);
  render(res);
};

el('#clearBtn').onclick = ()=>{
  el('#inp').value='';
  out.box.hidden=true; out.type.textContent=''; out.detail.textContent=''; out.jidRow.hidden=true; out.jid.textContent=''; out.linkRow.hidden=true; out.links.innerHTML='';
};
</script></body>
</html>
